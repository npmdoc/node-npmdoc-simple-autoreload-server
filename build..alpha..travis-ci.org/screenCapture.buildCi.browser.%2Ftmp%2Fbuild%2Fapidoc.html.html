<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/cytb/simple-autoreload-server">simple-autoreload-server (v0.2.6)</a>
</h1>
<h4>Simple Web Server with live/autoreload features without browser extensions.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.simple-autoreload-server">module simple-autoreload-server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.simple-autoreload-server">
            function <span class="apidocSignatureSpan"></span>simple-autoreload-server
            <span class="apidocSignatureSpan">(it)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer">
            function <span class="apidocSignatureSpan">simple-autoreload-server.</span>SimpleAutoreloadServer
            <span class="apidocSignatureSpan">(option)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.toString">
            function <span class="apidocSignatureSpan">simple-autoreload-server.</span>toString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">simple-autoreload-server.</span>SimpleAutoreloadServer.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">simple-autoreload-server.</span>autoreload</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">simple-autoreload-server.</span>option</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">simple-autoreload-server.</span>watch</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.simple-autoreload-server.SimpleAutoreloadServer">module simple-autoreload-server.SimpleAutoreloadServer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.SimpleAutoreloadServer">
            function <span class="apidocSignatureSpan">simple-autoreload-server.</span>SimpleAutoreloadServer
            <span class="apidocSignatureSpan">(option)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.logPrefix">
            function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.</span>logPrefix
            <span class="apidocSignatureSpan">(host)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.</span>displayName</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.simple-autoreload-server.SimpleAutoreloadServer.prototype">module simple-autoreload-server.SimpleAutoreloadServer.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.broadcast">
            function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>broadcast
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.createServer">
            function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>createServer
            <span class="apidocSignatureSpan">(dirs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.createWatchers">
            function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>createWatchers
            <span class="apidocSignatureSpan">(dirs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.getLogLevel">
            function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>getLogLevel
            <span class="apidocSignatureSpan">(level)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.log">
            function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>log
            <span class="apidocSignatureSpan">(mode, tag, text)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.setupOptions">
            function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>setupOptions
            <span class="apidocSignatureSpan">(options, logger)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.start">
            function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>start
            <span class="apidocSignatureSpan">(done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.stop">
            function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>logLevel</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>logLevelMap</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.simple-autoreload-server.autoreload">module simple-autoreload-server.autoreload</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.autoreload.SimpleAutoreloadServer">
            function <span class="apidocSignatureSpan">simple-autoreload-server.autoreload.</span>SimpleAutoreloadServer
            <span class="apidocSignatureSpan">(option)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.simple-autoreload-server.option">module simple-autoreload-server.option</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.option.OptionHelper">
            function <span class="apidocSignatureSpan">simple-autoreload-server.option.</span>OptionHelper
            <span class="apidocSignatureSpan">(optionList, defaults)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.simple-autoreload-server.watch">module simple-autoreload-server.watch</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.simple-autoreload-server.watch.RecursiveWatcher">
            function <span class="apidocSignatureSpan">simple-autoreload-server.watch.</span>RecursiveWatcher
            <span class="apidocSignatureSpan">(arg$)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.simple-autoreload-server" id="apidoc.module.simple-autoreload-server">module simple-autoreload-server</a></h1>


    <h2>
        <a href="#apidoc.element.simple-autoreload-server.simple-autoreload-server" id="apidoc.element.simple-autoreload-server.simple-autoreload-server">
        function <span class="apidocSignatureSpan"></span>simple-autoreload-server
        <span class="apidocSignatureSpan">(it)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">simple-autoreload-server = function (it){
  var server;
  server = new autoreload.SimpleAutoreloadServer(it);
  server.start();
  return server;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer">
        function <span class="apidocSignatureSpan">simple-autoreload-server.</span>SimpleAutoreloadServer
        <span class="apidocSignatureSpan">(option)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SimpleAutoreloadServer(option){
  option == null &amp;&amp; (option = {});
  this.websockets = [];
  this.running = false;
  this.setupOptions(option);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

(function(){
module.exports = function(){
  var autoreload, exports;
  autoreload = require('./lib/autoreload');
  exports = function(it){
    var server;
    server = new autoreload.<span class="apidocCodeKeywordSpan">SimpleAutoreloadServer</span>(it);
    server.start();
    return server;
  };
  return import$(exports, autoreload);
}();
function import$(obj, src){
  var own = {}.hasOwnProperty;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.toString" id="apidoc.element.simple-autoreload-server.toString">
        function <span class="apidocSignatureSpan">simple-autoreload-server.</span>toString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toString = function () {
    return text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return function(){
      var mtime;
      mtime = fs.statSync(p).mtime;
      if (last !== mtime) {
        cached = fs.readFileSync(p, {
          encoding: enc
        });
        cached = cached.<span class="apidocCodeKeywordSpan">toString</span>();
        last = mtime;
      }
      return cached;
    };
  };
  return Injecter;
}());
...</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.simple-autoreload-server.SimpleAutoreloadServer" id="apidoc.module.simple-autoreload-server.SimpleAutoreloadServer">module simple-autoreload-server.SimpleAutoreloadServer</a></h1>


    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.SimpleAutoreloadServer" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.SimpleAutoreloadServer">
        function <span class="apidocSignatureSpan">simple-autoreload-server.</span>SimpleAutoreloadServer
        <span class="apidocSignatureSpan">(option)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SimpleAutoreloadServer(option){
  option == null &amp;&amp; (option = {});
  this.websockets = [];
  this.running = false;
  this.setupOptions(option);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

(function(){
module.exports = function(){
  var autoreload, exports;
  autoreload = require('./lib/autoreload');
  exports = function(it){
    var server;
    server = new autoreload.<span class="apidocCodeKeywordSpan">SimpleAutoreloadServer</span>(it);
    server.start();
    return server;
  };
  return import$(exports, autoreload);
}();
function import$(obj, src){
  var own = {}.hasOwnProperty;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.logPrefix" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.logPrefix">
        function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.</span>logPrefix
        <span class="apidocSignatureSpan">(host)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logPrefix = function (host){
  return ("[autoreload #" + process.pid + " " + host + "]").cyan;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    switch (ref$ = [mode], false) {
    case 'error' !== ref$[0]:
      return ("error@" + tag).red;
    default:
      return tag.green;
    }
  }());
  prefix = this.constructor.<span class="apidocCodeKeywordSpan">logPrefix</span>("localhost:" + this.options.port);
  return console.log(prefix + " " + coloredTag + " " + text);
};
prototype.stop = function(){
  var ref$, ref1$, ex;
  try {
    if ((ref$ = this.watcher) != null) {
      ref$.stop();
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.simple-autoreload-server.SimpleAutoreloadServer.prototype" id="apidoc.module.simple-autoreload-server.SimpleAutoreloadServer.prototype">module simple-autoreload-server.SimpleAutoreloadServer.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.broadcast" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.broadcast">
        function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>broadcast
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">broadcast = function (data){
  var json, i$, x$, ref$, len$, ex, results$ = [];
  try {
    json = JSON.stringify(data);
    this.log("debug", "broadcast", "to " + this.websockets.length + " sockets: " + json);
    for (i$ = 0, len$ = (ref$ = this.websockets).length; i$ &lt; len$; ++i$) {
      x$ = ref$[i$];
      results$.push(x$.send(json));
    }
    return results$;
  } catch (e$) {
    ex = e$;
    return this.log("error", "broadcast", ex.message);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      this$.log("verbose", "watch", "updated " + target);
      httpPath = '';
      try {
        if (that = /^[^/].*$/.exec(path.relative(dir.path, target))) {
          httpPath = "/" + that[0];
        }
      } catch (e$) {}
      return this$.<span class="apidocCodeKeywordSpan">broadcast</span>({
        type: 'update',
        path: httpPath,
        reload: shouldReload(httpPath)
      });
    }
  }
}));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.createServer" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.createServer">
        function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>createServer
        <span class="apidocSignatureSpan">(dirs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createServer = function (dirs){
  var inject, encoding, i$, x$, ref$, len$, app, y$, opts, ref1$, ref2$;
  inject = [].concat(this.options.inject);
  encoding = this.options.encoding;
  if (this.options.builtinScript) {
    inject = inject.concat({
      which: new RegExp(".*\\.html?$"),
      where: new RegExp("&lt;/(body|head|html)&gt;", "i"),
      type: "file",
      content: path.resolve(__dirname, '../client.html'),
      prepend: true,
      encoding: encoding
    });
  }
  for (i$ = 0, len$ = (ref$ = [].concat(inject)).length; i$ &lt; len$; ++i$) {
    x$ = ref$[i$];
    if (x$.type === "file") {
      x$.content = path.resolve(this.basedir, x$.content);
    }
  }
  app = (ref$ = this.options.connectApp) != null
    ? ref$
    : connect();
  if (this.getLogLevel(this.options.log) &gt;= this.logLevel.verbose) {
    app.use(connect.logger(':ar-prefix :remote-addr :method ":url HTTP/:http-version" :status :referrer :user-agent'));
  }
  for (i$ = 0, len$ = dirs.length; i$ &lt; len$; ++i$) {
    y$ = dirs[i$];
    if (this.options.listDirectory) {
      app.use(y$.target, connect.directory(y$.path, {
        icons: true
      }));
    }
    opts = (ref$ = (ref1$ = (ref2$ = {}, ref2$.path = y$.path, ref2$.target = y$.target, ref2$), ref1$.inject = inject, ref1$.encoding
 = encoding, ref1$), ref$.defaultPages = this.defaultPages, ref$);
    app.use(y$.target, bind$(new InjectionRouter(opts), 'route'));
    app.use(y$.target, connect['static'](y$.path));
  }
  return http.createServer(app);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  res$ = [];
  for (i$ = 0, len$ = mounts.length; i$ &lt; len$; ++i$) {
    x$ = mounts[i$];
    res$.push((ref$ = import$({}, x$), ref$.path = path.resolve(this.basedir, x$.path), ref$));
  }
  dirs = res$;
  this.watchers = this.createWatchers(dirs);
  this.server = this.<span class="apidocCodeKeywordSpan">createServer</span>(dirs);
  this.watchers.map(function(it){
    return it.start();
  });
} catch (e$) {
  ex = e$;
  this.log("error", "server", ex.message);
  this.log("error", "server", ex.stack);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.createWatchers" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.createWatchers">
        function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>createWatchers
        <span class="apidocSignatureSpan">(dirs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createWatchers = function (dirs){
  var shouldReload, watchObjs, this$ = this;
  if (this.options.recursive) {
    this.log("verbose", "server", "init with recursive-option. this may take a while.");
  }
  shouldReload = OptionHelper.readPattern(this.options.reload, this.options.ignoreCase, this.options.includeHidden);
  watchObjs = dirs.map(function(dir){
    var matcher;
    matcher = OptionHelper.readPattern(dir.watch, dir.ignoreCase, dir.includeHidden);
    return new RecursiveWatcher(import$(clone$(dir), {
      delay: this$.options.watchDelay,
      error: function(arg$, src){
        var message;
        message = arg$.message;
        return this$.log("error", "watch", src + " Error: " + message);
      },
      update: function(arg$, target){
        var httpPath, that;
        if (!matcher(target)) {
          return this$.log("debug", "watch", "(ignored)".cyan + " " + target);
        } else {
          this$.log("verbose", "watch", "updated " + target);
          httpPath = '';
          try {
            if (that = /^[^/].*$/.exec(path.relative(dir.path, target))) {
              httpPath = "/" + that[0];
            }
          } catch (e$) {}
          return this$.broadcast({
            type: 'update',
            path: httpPath,
            reload: shouldReload(httpPath)
          });
        }
      }
    }));
  });
  return watchObjs;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    : []);
  res$ = [];
  for (i$ = 0, len$ = mounts.length; i$ &lt; len$; ++i$) {
    x$ = mounts[i$];
    res$.push((ref$ = import$({}, x$), ref$.path = path.resolve(this.basedir, x$.path), ref$));
  }
  dirs = res$;
  this.watchers = this.<span class="apidocCodeKeywordSpan">createWatchers</span>(dirs);
  this.server = this.createServer(dirs);
  this.watchers.map(function(it){
    return it.start();
  });
} catch (e$) {
  ex = e$;
  this.log("error", "server", ex.message);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.getLogLevel" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.getLogLevel">
        function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>getLogLevel
        <span class="apidocSignatureSpan">(level)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLogLevel = function (level){
  var i$, to$, i;
  level == null &amp;&amp; (level = "normal");
  switch (false) {
  case typeof level !== "boolean":
    return level &amp;&amp; 2 || 0;
  case typeof level !== "string":
    for (i$ = 0, to$ = this.logLevel.length; i$ &lt; to$; ++i$) {
      i = i$;
      if (this.logLevel[i].level === level) {
        return i;
      }
    }
    return 2;
  case !(0 &lt;= level &amp;&amp; level &lt; this.logLevel.length):
    return level;
  default:
    return 2;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return level;
  default:
    return 2;
  }
};
prototype.log = function(mode, tag, text){
  var level, coloredTag, prefix;
  level = this.<span class="apidocCodeKeywordSpan">getLogLevel</span>(this.options.log);
  if (!in$(mode, this.logLevel[level].tags)) {
    return;
  }
  coloredTag = (function(){
    var ref$;
    switch (ref$ = [mode], false) {
    case 'error' !== ref$[0]:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.log" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.log">
        function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>log
        <span class="apidocSignatureSpan">(mode, tag, text)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (mode, tag, text){
  var level, coloredTag, prefix;
  level = this.getLogLevel(this.options.log);
  if (!in$(mode, this.logLevel[level].tags)) {
    return;
  }
  coloredTag = (function(){
    var ref$;
    switch (ref$ = [mode], false) {
    case 'error' !== ref$[0]:
      return ("error@" + tag).red;
    default:
      return tag.green;
    }
  }());
  prefix = this.constructor.logPrefix("localhost:" + this.options.port);
  return console.log(prefix + " " + coloredTag + " " + text);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    out = optionHelper.assure(out, defaults);
  }
  if (!(out.onmessage instanceof Function)) {
    out.onmessage = function(){};
  }
  this.options = out;
  if (json != null) {
    this.<span class="apidocCodeKeywordSpan">log</span>("verbose", "options", "config loaded: " +
file);
    return this.log("verbose", "options", "change working directory to " + dir);
  }
};
prototype.logLevel = [
  {
    level: 'silent',
    tags: []
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.setupOptions" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.setupOptions">
        function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>setupOptions
        <span class="apidocSignatureSpan">(options, logger)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setupOptions = function (options, logger){
  var optionHelper, getRootDef, defaults, defaultsSrc, key, names, base, ref$, i$, len$, def, assured, json, preFile, file, dir,
nextDir, x$, newBase, y$, ref1$, out;
  logger == null &amp;&amp; (logger = function(){});
  options = import$({}, options);
  optionHelper = new OptionHelper;
  getRootDef = function(pname, name, alter){
    alter == null &amp;&amp; (alter = name);
    return function(options, defMap){
      var that, ref$, ref1$, ref2$;
      switch (false) {
      case (that = (ref$ = options[pname]) != null ? ref$[name] : void 8) == null:
        return that;
      case !(that = (ref1$ = options[pname]) != null ? (ref2$ = ref1$[0]) != null ? ref2$[name] : void 8 : void 8):
        return that;
      case (that = options[name]) == null:
        return that;
      default:
        return defMap[alter];
      }
    };
  };
  defaults = {};
  defaultsSrc = {
    mount: ['watch', 'recursive', 'followSymlinks', 'ignoreCase', 'includeHidden'],
    inject: ['where', 'which', 'type', 'prepend', 'includeHidden']
  };
  for (key in defaultsSrc) {
    names = defaultsSrc[key];
    base = (ref$ = defaults[key]) != null
      ? ref$
      : defaults[key] = {};
    for (i$ = 0, len$ = names.length; i$ &lt; len$; ++i$) {
      def = names[i$];
      base[def] = getRootDef(key, def);
    }
  }
  assured = optionHelper.assure(options, defaults);
  json = null;
  preFile = file = null;
  dir = null;
  if (assured.searchConfig) {
    nextDir = process.cwd();
    do {
      dir = nextDir;
      preFile = file;
      file = path.resolve(dir, assured.config);
      try {
        x$ = fs.readFileSync(file, {
          encoding: this.encoding
        });
        json = JSON.parse(x$.toString());
      } catch (e$) {}
      nextDir = path.join(dir, "..");
    } while (json == null &amp;&amp; preFile !== file);
  }
  base = json != null
    ? json
    : {};
  if (json != null) {
    this.basedir = path.resolve(dir, path.dirname(file));
    process.chdir(this.basedir);
  } else {
    this.basedir = process.cwd();
  }
  newBase = import$(import$({}, base), options);
  for (i$ = 0, len$ = (ref$ = ['inject', 'mount']).length; i$ &lt; len$; ++i$) {
    y$ = ref$[i$];
    newBase[y$] = [].concat((ref1$ = base[y$]) != null
      ? ref1$
      : [], (ref1$ = options[y$]) != null
      ? ref1$
      : []);
  }
  out = optionHelper.assure(newBase, defaults);
  if (out.inject == null || out.inject.length &lt; 1) {
    out.inject = [];
    try {
      file = path.resolve(this.basedir, '.autoreload.html');
      if ((ref$ = fs.lstatSync(file)) != null &amp;&amp; ref$.isFile()) {
        out.inject.push({
          content: file
        });
      }
    } catch (e$) {}
    out = optionHelper.assure(out, defaults);
  }
  if (!(out.onmessage instanceof Function)) {
    out.onmessage = function(){};
  }
  this.options = out;
  if (json != null) {
    this.log("verbose", "options", "config loaded: " + file);
    return this.log("verbose", "options", "change working directory to " + dir);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
SimpleAutoreloadServer.logPrefix = function(host){
  return ("[autoreload #" + process.pid + " " + host + "]").cyan;
};
function SimpleAutoreloadServer(option){
  option == null &amp;&amp; (option = {});
  this.websockets = [];
  this.running = false;
  this.<span class="apidocCodeKeywordSpan">setupOptions</span>(option);
}
prototype.setupOptions = function(options, logger){
  var optionHelper, getRootDef, defaults, defaultsSrc, key, names, base, ref$, i$, len$, def, assured, json, preFile, file, dir,
nextDir, x$, newBase, y$, ref1$, out;
  logger == null &amp;&amp; (logger = function(){});
  options = import$({}, options);
  optionHelper = new OptionHelper;
  getRootDef = function(pname, name, alter){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.start" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.start">
        function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>start
        <span class="apidocSignatureSpan">(done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (done){
  var mounts, ref$, dirs, res$, i$, x$, len$, ex, listen, y$, this$ = this;
  mounts = [];
  try {
    if (this.running) {
      this.stop();
    }
    mounts = mounts.concat((ref$ = import$({}, this.options), ref$.target = "/", ref$));
    mounts = mounts.concat((ref$ = this.options.mount) != null
      ? ref$
      : []);
    res$ = [];
    for (i$ = 0, len$ = mounts.length; i$ &lt; len$; ++i$) {
      x$ = mounts[i$];
      res$.push((ref$ = import$({}, x$), ref$.path = path.resolve(this.basedir, x$.path), ref$));
    }
    dirs = res$;
    this.watchers = this.createWatchers(dirs);
    this.server = this.createServer(dirs);
    this.watchers.map(function(it){
      return it.start();
    });
  } catch (e$) {
    ex = e$;
    this.log("error", "server", ex.message);
    this.log("error", "server", ex.stack);
    if (done != null) {
      done(ex, this);
    }
    return null;
  }
  listen = {
    port: (ref$ = this.options).port,
    host: ref$.host,
    path: ref$.path
  };
  y$ = this.server;
  y$.on('upgrade', function(req, sock, head){
    var addr, x$;
    if (!WebSocket.isWebSocket(req)) {
      return;
    }
    addr = sock.remoteAddress + ":" + sock.remotePort;
    x$ = new WebSocket(req, sock, head);
    x$.on('open', function(){
      this$.log("verbose", 'websocket', addr + " - new connection");
      return x$.send(JSON.stringify({
        type: 'open',
        log: this$.options.clientLog
      }));
    });
    x$.on('message', function(arg$){
      var data;
      data = arg$.data;
      this$.log("verbose", 'websocket', addr + " - received message " + data);
      return this$.options.onmessage(data, x$);
    });
    x$.on('close', function(){
      this$.log("verbose", 'websocket', addr + " - connection closed");
      return this$.websockets = this$.websockets.filter((function(it){
        return it !== x$;
      }));
    });
    this$.websockets.push(x$);
    return x$;
  });
  y$.on('error', function(err){
    var ref$;
    switch (ref$ = [err.code], false) {
    case 'EADDRINUSE' !== ref$[0]:
      this$.log("error", 'server', "Cannot use " + (listen.host + "").green + ":" + (listen.port + "").green + " as a listen address
. Error: " + err.message + "");
      return this$.watchers.map(function(it){
        return it.stop();
      });
    }
  });
  y$.listen(listen.port | 0, listen.host, 511, function(){
    var i$, x$, ref$, len$, that, y$, child, port, address, serverUrl;
    this$.running = true;
    this$.abspath = path.resolve(process.cwd(), listen.path) + "";
    for (i$ = 0, len$ = (ref$ = mounts.slice(1)).length; i$ &lt; len$; ++i$) {
      x$ = ref$[i$];
      this$.log("info", "server", "mounted " + x$.path + " to " + x$.target);
    }
    this$.log("normal", "server", "started on :" + (listen.port + "").green + " at " + this$.abspath);
    if (that = this$.options.execute != null &amp;&amp; this$.options.execute) {
      this$.log("info", "server", "execute command: " + that);
      y$ = child = child_process.exec(that, {
        stdio: 'ignore'
      });
      y$.unref();
      if (this$.options.stopOnExit) {
        this$.log("info", "server", "server will stop when the command has exit.");
        child.on('exit', function(){
          this$.log("info", "server", "child command has finished.");
          return this$.stop();
        });
      }
    }
    if (this$.options.browse) {
      ref$ = this$.server.address(), port = ref$.port, address = ref$.address;
      if (address === '0.0.0.0' || address === '::') {
        address = "localhost";
      }
      serverUrl = (function(){
        switch (typeof this.options.browse) {
        case "string":
          return this.options.browse;
        default:
          return "http://" + address + ":" + port + "/";
        }
      }.call(this$));
      this$.log("info", "server", "open " + serverUrl);
      opener(serverUrl, {
        stdio: 'ignore'
      }).unref();
    }
    if (done != null) {
      return done(null, this$);
    }
  });
  return y$;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
(function(){
module.exports = function(){
  var autoreload, exports;
  autoreload = require('./lib/autoreload');
  exports = function(it){
    var server;
    server = new autoreload.SimpleAutoreloadServer(it);
    server.<span class="apidocCodeKeywordSpan">start</span>();
    return server;
  };
  return import$(exports, autoreload);
}();
function import$(obj, src){
  var own = {}.hasOwnProperty;
  for (var key in src) if (own.call(src, key)) obj[key] = src[key];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.stop" id="apidoc.element.simple-autoreload-server.SimpleAutoreloadServer.prototype.stop">
        function <span class="apidocSignatureSpan">simple-autoreload-server.SimpleAutoreloadServer.prototype.</span>stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function (){
  var ref$, ref1$, ex;
  try {
    if ((ref$ = this.watcher) != null) {
      ref$.stop();
    }
    if ((ref1$ = this.server) != null) {
      ref1$.close();
    }
    this.running = false;
    return this.log("normal", "server", "stopped.");
  } catch (e$) {
    ex = e$;
    return this.log("error", "server", ex.message);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  prefix = this.constructor.logPrefix("localhost:" + this.options.port);
  return console.log(prefix + " " + coloredTag + " " + text);
};
prototype.stop = function(){
  var ref$, ref1$, ex;
  try {
    if ((ref$ = this.watcher) != null) {
      ref$.<span class="apidocCodeKeywordSpan">stop</span>();
    }
    if ((ref1$ = this.server) != null) {
      ref1$.close();
    }
    this.running = false;
    return this.log("normal", "server", "stopped.");
  } catch (e$) {
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.simple-autoreload-server.autoreload" id="apidoc.module.simple-autoreload-server.autoreload">module simple-autoreload-server.autoreload</a></h1>


    <h2>
        <a href="#apidoc.element.simple-autoreload-server.autoreload.SimpleAutoreloadServer" id="apidoc.element.simple-autoreload-server.autoreload.SimpleAutoreloadServer">
        function <span class="apidocSignatureSpan">simple-autoreload-server.autoreload.</span>SimpleAutoreloadServer
        <span class="apidocSignatureSpan">(option)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SimpleAutoreloadServer(option){
  option == null &amp;&amp; (option = {});
  this.websockets = [];
  this.running = false;
  this.setupOptions(option);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

(function(){
module.exports = function(){
  var autoreload, exports;
  autoreload = require('./lib/autoreload');
  exports = function(it){
    var server;
    server = new autoreload.<span class="apidocCodeKeywordSpan">SimpleAutoreloadServer</span>(it);
    server.start();
    return server;
  };
  return import$(exports, autoreload);
}();
function import$(obj, src){
  var own = {}.hasOwnProperty;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.simple-autoreload-server.option" id="apidoc.module.simple-autoreload-server.option">module simple-autoreload-server.option</a></h1>


    <h2>
        <a href="#apidoc.element.simple-autoreload-server.option.OptionHelper" id="apidoc.element.simple-autoreload-server.option.OptionHelper">
        function <span class="apidocSignatureSpan">simple-autoreload-server.option.</span>OptionHelper
        <span class="apidocSignatureSpan">(optionList, defaults)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function OptionHelper(optionList, defaults){
  var i$, ref$, len$, optionEntry, key, value, ref1$, ref2$;
  this.optionList = optionList != null ? optionList : optionsSource;
  this.defaults = defaults != null
    ? defaults
    : {};
  this.optionMap = {};
  for (i$ = 0, len$ = (ref$ = this.optionList).length; i$ &lt; len$; ++i$) {
    optionEntry = ref$[i$];
    for (key in optionEntry) {
      value = optionEntry[key];
      ((ref2$ = (ref1$ = this.optionMap)[key]) != null
        ? ref2$
        : ref1$[key] = {})[value] = optionEntry;
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.simple-autoreload-server.watch" id="apidoc.module.simple-autoreload-server.watch">module simple-autoreload-server.watch</a></h1>


    <h2>
        <a href="#apidoc.element.simple-autoreload-server.watch.RecursiveWatcher" id="apidoc.element.simple-autoreload-server.watch.RecursiveWatcher">
        function <span class="apidocSignatureSpan">simple-autoreload-server.watch.</span>RecursiveWatcher
        <span class="apidocSignatureSpan">(arg$)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RecursiveWatcher(arg$){
  var ref$;
  this.path = arg$.path, this.delay = (ref$ = arg$.delay) != null ? ref$ : 30, this.update = (ref$ = arg$.update) != null
    ? ref$
    : function(){}, this.error = (ref$ = arg$.error) != null
    ? ref$
    : function(){}, this.recursive = (ref$ = arg$.recursive) != null ? ref$ : false, this.followSymlinks = (ref$ = arg$.followSymlinks
) != null ? ref$ : false;
  this.watchers = [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>